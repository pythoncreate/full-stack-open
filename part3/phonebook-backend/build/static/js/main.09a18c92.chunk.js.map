{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","services/numbers.js","index.js"],"names":["Filter","filter","onChange","value","PersonForm","onSubmit","name","number","type","Persons","persons","Notification","notification","success","className","baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","ReactDOM","render","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setNotification","setSuccess","setFiltered","useEffect","personService","initialPersons","console","log","peopleToShow","person","toLowerCase","includes","deleteNum","event","personID","target","window","confirm","check","item","catch","error","resetForm","createPerson","personObject","concat","showMessage","message","successNotification","setTimeout","preventDefault","some","p","updatedPerson","map","updatePerson","find","key","onClick","document","getElementById"],"mappings":"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","file":"static/js/main.09a18c92.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Filter = ({ filter, onChange }) => {\r\n  return (\r\n    <div>\r\n      Filter Shown with <input onChange={onChange} value={filter} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = ({ onSubmit, name, number }) => {\r\n  return (\r\n    <div>\r\n      <form onSubmit={onSubmit}>\r\n        <div>\r\n          name: <input value={name.value} onChange={name.onChange} />\r\n        </div>\r\n        <p></p>\r\n        <div>\r\n          number: <input value={number.value} onChange={number.onChange} />\r\n        </div>\r\n        <p></p>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Persons = ({ persons }) => {\r\n  return <div>{persons}</div>;\r\n};\r\n\r\nexport default Persons;\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ notification, success }) => {\r\n  if (notification === null) {\r\n    return null;\r\n  }\r\n  if (success) {\r\n    return <div className=\"success\">{notification}</div>;\r\n  } else {\r\n    return <div className=\"error\">{notification}</div>;\r\n  }\r\n};\r\n\r\nexport default Notification;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst deletePerson = id => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nexport default { getAll, create, update, deletePerson };\r\n","import React, { useState, useEffect } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport Filter from \"./components/Filter\";\r\nimport PersonForm from \"./components/PersonForm\";\r\nimport Persons from \"./components/Persons\";\r\nimport Notification from \"./components/Notification\";\r\nimport \"./index.css\";\r\nimport personService from \"./services/numbers\";\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [notification, setNotification] = useState(null);\r\n  const [success, setSuccess] = useState(null);\r\n  const [filter, setFiltered] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    personService.getAll().then(initialPersons => setPersons(initialPersons));\r\n  }, []);\r\n\r\n  console.log(\"Persons\", persons);\r\n\r\n  const peopleToShow =\r\n    filter === \"\"\r\n      ? persons\r\n      : persons.filter(person =>\r\n          person.name.toLowerCase().includes(filter.toLowerCase())\r\n        );\r\n\r\n  const rows = () =>\r\n    peopleToShow.map(p => (\r\n      <p className=\"number\" key={p.name}>\r\n        {p.name} {p.number}{\" \"}\r\n        <span>\r\n          <button value={p.id} onClick={deleteNum}>\r\n            delete\r\n          </button>\r\n        </span>\r\n      </p>\r\n    ));\r\n\r\n  const deleteNum = event => {\r\n    let personID = event.target.value;\r\n    if (window.confirm(\"Do you really want to delete?\")) {\r\n      personService\r\n        .deletePerson(personID)\r\n        .then(() => {\r\n          let check = persons.filter(item => item.id != personID);\r\n          console.log(\"Check\", check);\r\n          setPersons(check);\r\n        })\r\n        .catch(error => {\r\n          setNotification(\r\n            `Sorry that user was already deleted from the phonebook`,\r\n            false\r\n          );\r\n          setPersons(persons.filter(item => item.id != personID));\r\n        });\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setNewName(\"\");\r\n    setNewNumber(\"\");\r\n  };\r\n\r\n  const updatePerson = (id, personObject) => {\r\n    personService.update(id, personObject).then(updatedPerson => {\r\n      showMessage(`Success! User ${newName} was updated`);\r\n      setPersons(\r\n        persons.map(person => (person.id !== id ? person : updatedPerson))\r\n      );\r\n      resetForm();\r\n    });\r\n  };\r\n\r\n  const addPerson = event => {\r\n    event.preventDefault();\r\n\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber\r\n    };\r\n\r\n    const existingPerson = persons.some(\r\n      p => p.name.toLowerCase() === newName.toLowerCase()\r\n    );\r\n\r\n    if (existingPerson) {\r\n      if (\r\n        window.confirm(\r\n          `${newName} is allready in the phonebok. Would you like to replace the old number with a new one?`\r\n        )\r\n      ) {\r\n        const personId = persons.find(\r\n          person => person.name.toLowerCase() === newName.toLowerCase().id\r\n        );\r\n        updatePerson(personId, personObject);\r\n      }\r\n      return;\r\n    }\r\n    createPerson(personObject);\r\n  };\r\n\r\n  const createPerson = personObject => {\r\n    personService\r\n      .create(personObject)\r\n      .then(data => {\r\n        setPersons(persons.concat(data));\r\n        showMessage(`Success! User ${newName} was added`);\r\n        resetForm();\r\n      })\r\n      .catch(error => {\r\n        showMessage(\r\n          `Sorry can't add that number. Here's why: ,\r\n            ${error.response.data.error}`,\r\n          false\r\n        );\r\n      });\r\n  };\r\n\r\n  const showMessage = (message, successNotification = true) => {\r\n    setNotification(message);\r\n    setSuccess(successNotification);\r\n    setTimeout(() => {\r\n      setNotification(null);\r\n      setSuccess(null);\r\n    }, 3000);\r\n  };\r\n\r\n  const handleSearch = event => {\r\n    setFiltered(event.target.value);\r\n  };\r\n\r\n  const handleNameChange = event => {\r\n    setNewName(event.target.value);\r\n  };\r\n\r\n  const handleNumberChange = event => {\r\n    setNewNumber(event.target.value);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Phonebook</h1>\r\n\r\n      <Notification notification={notification} success={success} />\r\n\r\n      <Filter value={filter} onChange={handleSearch} />\r\n\r\n      <h2>Add a new</h2>\r\n\r\n      <PersonForm\r\n        onSubmit={addPerson}\r\n        name={{ value: newName, onChange: handleNameChange }}\r\n        number={{ value: newNumber, onChange: handleNumberChange }}\r\n      />\r\n\r\n      <h3>Numbers</h3>\r\n\r\n      <Persons persons={rows()} />\r\n    </div>\r\n  );\r\n};\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}