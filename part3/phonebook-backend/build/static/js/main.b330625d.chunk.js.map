{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","services/numbers.js","index.js"],"names":["Filter","filter","onChange","className","value","PersonForm","onSubmit","name","number","type","Persons","persons","Notification","notification","success","baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","ReactDOM","render","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setNotification","setSuccess","setFiltered","useEffect","personService","initialPersons","console","log","peopleToShow","person","toLowerCase","includes","deleteNum","event","personID","target","window","confirm","check","item","catch","error","resetForm","createPerson","personObject","concat","showMessage","message","successNotification","setTimeout","href","preventDefault","some","p","updatedPerson","map","updatePerson","find","key","onClick","document","getElementById"],"mappings":"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","file":"static/js/main.b330625d.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Filter = ({ filter, onChange }) => {\r\n  return (\r\n    <div className=\"col m-3 pt-2\">\r\n      Filter Shown with <input onChange={onChange} value={filter} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = ({ onSubmit, name, number }) => {\r\n  return (\r\n    <div className=\"col m-3\">\r\n      <div>\r\n        <h5 className=\"pb-3\">Add a Number To The Phonebook</h5>\r\n      </div>\r\n      <div>\r\n        <form onSubmit={onSubmit}>\r\n          <div>\r\n            name: <input value={name.value} onChange={name.onChange} />\r\n          </div>\r\n          <p></p>\r\n          <div>\r\n            number: <input value={number.value} onChange={number.onChange} />\r\n          </div>\r\n          <p></p>\r\n          <div>\r\n            <button type=\"submit\">add</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Persons = ({ persons }) => {\r\n  return (\r\n    <div className=\"col m-3\">\r\n      <div>\r\n        <h5 className=\"pb-3\">Phone Numbers</h5>\r\n      </div>\r\n      <div>{persons}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ notification, success }) => {\r\n  if (notification === null) {\r\n    return null;\r\n  }\r\n  if (success) {\r\n    return <div className=\"success\">{notification}</div>;\r\n  } else {\r\n    return <div className=\"error\">{notification}</div>;\r\n  }\r\n};\r\n\r\nexport default Notification;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst deletePerson = id => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nexport default { getAll, create, update, deletePerson };\r\n","import React, { useState, useEffect } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport Filter from \"./components/Filter\";\r\nimport PersonForm from \"./components/PersonForm\";\r\nimport Persons from \"./components/Persons\";\r\nimport Notification from \"./components/Notification\";\r\nimport \"./index.css\";\r\nimport personService from \"./services/numbers\";\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [notification, setNotification] = useState(null);\r\n  const [success, setSuccess] = useState(null);\r\n  const [filter, setFiltered] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    personService.getAll().then(initialPersons => setPersons(initialPersons));\r\n  }, []);\r\n\r\n  console.log(\"Persons\", persons);\r\n\r\n  const peopleToShow =\r\n    filter === \"\"\r\n      ? persons\r\n      : persons.filter(person =>\r\n          person.name.toLowerCase().includes(filter.toLowerCase())\r\n        );\r\n\r\n  const rows = () =>\r\n    peopleToShow.map(p => (\r\n      <p className=\"number\" key={p.name}>\r\n        {p.name} {p.number}{\" \"}\r\n        <span>\r\n          <button value={p.id} onClick={deleteNum}>\r\n            delete\r\n          </button>\r\n        </span>\r\n      </p>\r\n    ));\r\n\r\n  const deleteNum = event => {\r\n    let personID = event.target.value;\r\n    if (window.confirm(\"Do you really want to delete?\")) {\r\n      personService\r\n        .deletePerson(personID)\r\n        .then(() => {\r\n          let check = persons.filter(item => item.id != personID);\r\n          console.log(\"Check\", check);\r\n          setPersons(check);\r\n        })\r\n        .catch(error => {\r\n          setNotification(\r\n            `Sorry that user was already deleted from the phonebook`,\r\n            false\r\n          );\r\n          setPersons(persons.filter(item => item.id != personID));\r\n        });\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setNewName(\"\");\r\n    setNewNumber(\"\");\r\n  };\r\n\r\n  const updatePerson = (id, personObject) => {\r\n    personService.update(id, personObject).then(updatedPerson => {\r\n      showMessage(`Success! User ${newName} was updated`);\r\n      setPersons(\r\n        persons.map(person => (person.id !== id ? person : updatedPerson))\r\n      );\r\n      resetForm();\r\n    });\r\n  };\r\n\r\n  const addPerson = event => {\r\n    event.preventDefault();\r\n\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber\r\n    };\r\n\r\n    const existingPerson = persons.some(\r\n      p => p.name.toLowerCase() === newName.toLowerCase()\r\n    );\r\n\r\n    if (existingPerson) {\r\n      if (\r\n        window.confirm(\r\n          `${newName} is allready in the phonebok. Would you like to replace the old number with a new one?`\r\n        )\r\n      ) {\r\n        const personId = persons.find(\r\n          person => person.name.toLowerCase() === newName.toLowerCase()\r\n        ).id;\r\n        updatePerson(personId, personObject);\r\n      }\r\n      return;\r\n    }\r\n    createPerson(personObject);\r\n  };\r\n\r\n  const createPerson = personObject => {\r\n    personService\r\n      .create(personObject)\r\n      .then(data => {\r\n        setPersons(persons.concat(data));\r\n        showMessage(`Success! User ${newName} was added`);\r\n        resetForm();\r\n      })\r\n      .catch(error => {\r\n        showMessage(\r\n          `Sorry can't add that number. Here's why:\r\n            ${error.response.data.error}`,\r\n          false\r\n        );\r\n      });\r\n  };\r\n\r\n  const showMessage = (message, successNotification = true) => {\r\n    setNotification(message);\r\n    setSuccess(successNotification);\r\n    setTimeout(() => {\r\n      setNotification(null);\r\n      setSuccess(null);\r\n    }, 3000);\r\n  };\r\n\r\n  const handleSearch = event => {\r\n    setFiltered(event.target.value);\r\n  };\r\n\r\n  const handleNameChange = event => {\r\n    setNewName(event.target.value);\r\n  };\r\n\r\n  const handleNumberChange = event => {\r\n    setNewNumber(event.target.value);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <nav className=\"navbar navbar-dark bg-dark\">\r\n        <a className=\"navbar-brand sticky-top\" href=\"#\">\r\n          <h2>Phonebook</h2>\r\n        </a>\r\n      </nav>\r\n      <Notification notification={notification} success={success} />\r\n      <div className=\"row mb-2\">\r\n        <Filter value={filter} onChange={handleSearch} />\r\n      </div>\r\n      <div className=\"row mb-2\">\r\n        <PersonForm\r\n          onSubmit={addPerson}\r\n          name={{ value: newName, onChange: handleNameChange }}\r\n          number={{ value: newNumber, onChange: handleNumberChange }}\r\n        />\r\n      </div>\r\n      <div className=\"row mb-2\">\r\n        <Persons persons={rows()} />\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nReactDOM.render(<App />, document.getElementById(\"container\"));\r\n"],"sourceRoot":""}