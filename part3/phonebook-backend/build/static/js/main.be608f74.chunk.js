(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},19:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(2),r=t(0),c=t.n(r),o=t(13),u=t.n(o),l=function(e){var n=e.filter,t=e.onChange;return c.a.createElement("div",null,"Filter Shown with ",c.a.createElement("input",{onChange:t,value:n}))},i=function(e){var n=e.onSubmit,t=e.name,a=e.number;return c.a.createElement("div",null,c.a.createElement("form",{onSubmit:n},c.a.createElement("div",null,"name: ",c.a.createElement("input",{value:t.value,onChange:t.onChange})),c.a.createElement("p",null),c.a.createElement("div",null,"number: ",c.a.createElement("input",{value:a.value,onChange:a.onChange})),c.a.createElement("p",null),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"add"))))},s=function(e){var n=e.persons;return c.a.createElement("div",null,n)},m=function(e){var n=e.notification,t=e.success;return null===n?null:t?c.a.createElement("div",{className:"success"},n):c.a.createElement("div",{className:"error"},n)},f=(t(19),t(3)),d=t.n(f),h="http://localhost:3001/persons",v=function(){return d.a.get(h).then((function(e){return e.data}))},b=function(e){return d.a.post(h,e).then((function(e){return e.data}))},p=function(e,n){return d.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},E=function(e){return d.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))};u.a.render(c.a.createElement((function(){var e=Object(r.useState)([]),n=Object(a.a)(e,2),t=n[0],o=n[1],u=Object(r.useState)(""),f=Object(a.a)(u,2),d=f[0],h=f[1],w=Object(r.useState)(""),g=Object(a.a)(w,2),C=g[0],j=g[1],O=Object(r.useState)(null),S=Object(a.a)(O,2),y=S[0],k=S[1],L=Object(r.useState)(null),N=Object(a.a)(L,2),U=N[0],D=N[1],J=Object(r.useState)(""),P=Object(a.a)(J,2),x=P[0],A=P[1];Object(r.useEffect)((function(){v().then((function(e){return o(e)}))}),[]),console.log("Persons",t);var B=""===x?t:t.filter((function(e){return e.name.toLowerCase().includes(x.toLowerCase())})),F=function(e){var n=e.target.value;window.confirm("Do you really want to delete?")&&E(n).then((function(){var e=t.filter((function(e){return e.id!=n}));console.log("Check",e),o(e)})).catch((function(e){k("Sorry that user was already deleted from the phonebook",!1),o(t.filter((function(e){return e.id!=n})))}))},H=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];k(e),D(n),setTimeout((function(){k(null),D(null)}),3e3)};return c.a.createElement("div",null,c.a.createElement("h1",null,"Phonebook"),c.a.createElement(m,{notification:y,success:U}),c.a.createElement(l,{value:x,onChange:function(e){A(e.target.value)}}),c.a.createElement("h2",null,"Add a new"),c.a.createElement(i,{onSubmit:function(e){e.preventDefault();var n={name:d,number:C};if(t.some((function(e){return e.name.toLowerCase()===d.toLowerCase()}))){var a=t.find((function(e){return e.name.toLowerCase()===d.toLowerCase()})),r=Object.assign(a,n);window.confirm("".concat(d," is allready in the phonebok. Would you like to replace the old number with a new one?")),p(a.id,n).then((function(){o(t.map((function(e){return e.name===d?r:e}))),H("Success! User ".concat(d," was updated")),h(""),j("")})).catch((function(e){H("Update failed, ".concat(d," allready removed from phonebook"),!1)}))}else b(n).then((function(e){o(t.concat(e)),H("Success! User ".concat(d," was added")),h(""),j("")})).catch((function(e){H("Sorry can't add that number. Here's why: ,\n            ".concat(e.response.data.error),!1)}))},name:{value:d,onChange:function(e){h(e.target.value)}},number:{value:C,onChange:function(e){j(e.target.value)}}}),c.a.createElement("h3",null,"Numbers"),c.a.createElement(s,{persons:B.map((function(e){return c.a.createElement("p",{className:"number",key:e.name},e.name," ",e.number," ",c.a.createElement("span",null,c.a.createElement("button",{value:e.id,onClick:F},"delete")))}))}))}),null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.be608f74.chunk.js.map