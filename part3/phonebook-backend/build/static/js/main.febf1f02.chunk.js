(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},19:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(2),r=t(0),u=t.n(r),o=t(13),c=t.n(o),l=function(e){var n=e.filter,t=e.onChange;return u.a.createElement("div",null,"Filter Shown with ",u.a.createElement("input",{onChange:t,value:n}))},i=function(e){var n=e.onSubmit,t=e.name,a=e.number;return u.a.createElement("div",null,u.a.createElement("form",{onSubmit:n},u.a.createElement("div",null,"name: ",u.a.createElement("input",{value:t.value,onChange:t.onChange})),u.a.createElement("p",null),u.a.createElement("div",null,"number: ",u.a.createElement("input",{value:a.value,onChange:a.onChange})),u.a.createElement("p",null),u.a.createElement("div",null,u.a.createElement("button",{type:"submit"},"add"))))},s=function(e){var n=e.persons;return u.a.createElement("div",null,n)},m=function(e){var n=e.notification,t=e.success;return null===n?null:t?u.a.createElement("div",{className:"success"},n):u.a.createElement("div",{className:"error"},n)},f=(t(19),t(3)),d=t.n(f),h="/api/persons",v=function(){return d.a.get(h).then((function(e){return e.data}))},b=function(e){return d.a.post(h,e).then((function(e){return e.data}))},E=function(e,n){return d.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){return d.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))};c.a.render(u.a.createElement((function(){var e=Object(r.useState)([]),n=Object(a.a)(e,2),t=n[0],o=n[1],c=Object(r.useState)(""),f=Object(a.a)(c,2),d=f[0],h=f[1],w=Object(r.useState)(""),g=Object(a.a)(w,2),C=g[0],S=g[1],j=Object(r.useState)(null),O=Object(a.a)(j,2),y=O[0],k=O[1],L=Object(r.useState)(null),N=Object(a.a)(L,2),D=N[0],J=N[1],P=Object(r.useState)(""),U=Object(a.a)(P,2),x=U[0],A=U[1];Object(r.useEffect)((function(){v().then((function(e){return o(e)}))}),[]),console.log("Persons",t);var B=""===x?t:t.filter((function(e){return e.name.toLowerCase().includes(x.toLowerCase())})),F=function(e){var n=e.target.value;window.confirm("Do you really want to delete?")&&p(n).then((function(){var e=t.filter((function(e){return e.id!=n}));console.log("Check",e),o(e)})).catch((function(e){k("Sorry that user was already deleted from the phonebook",!1),o(t.filter((function(e){return e.id!=n})))}))},H=function(){h(""),S("")},I=function(e){b(e).then((function(e){o(t.concat(e)),T("Success! User ".concat(d," was added")),H()})).catch((function(e){T("Sorry can't add that number. Here's why: ,\n            ".concat(e.response.data.error),!1)}))},T=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];k(e),J(n),setTimeout((function(){k(null),J(null)}),3e3)};return u.a.createElement("div",null,u.a.createElement("h1",null,"Phonebook"),u.a.createElement(m,{notification:y,success:D}),u.a.createElement(l,{value:x,onChange:function(e){A(e.target.value)}}),u.a.createElement("h2",null,"Add a new"),u.a.createElement(i,{onSubmit:function(e){e.preventDefault();var n={name:d,number:C};t.some((function(e){return e.name.toLowerCase()===d.toLowerCase()}))?window.confirm("".concat(d," is allready in the phonebok. Would you like to replace the old number with a new one?"))&&(console.log(t.find((function(e){return e.name.toLowerCase()===d.toLowerCase().id}))),function(e,n){E(e,n).then((function(n){T("Success! User ".concat(d," was updated")),o(t.map((function(t){return t.id!==e?t:n}))),H()}))}(t.find((function(e){return e.name.toLowerCase()===d.toLowerCase().id})),n)):I(n)},name:{value:d,onChange:function(e){h(e.target.value)}},number:{value:C,onChange:function(e){S(e.target.value)}}}),u.a.createElement("h3",null,"Numbers"),u.a.createElement(s,{persons:B.map((function(e){return u.a.createElement("p",{className:"number",key:e.name},e.name," ",e.number," ",u.a.createElement("span",null,u.a.createElement("button",{value:e.id,onClick:F},"delete")))}))}))}),null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.febf1f02.chunk.js.map